<div class="container" *ngIf="utilisateurOne!; else loggedOut" id="main-container">
   <header class="jumbotron">
     <h3>
       <strong>{{utilisateurOne!.username}}</strong> Profile
     </h3>
   </header>



    <section class="py-5 text-center container">
      <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto">
         
         <h5>{{utilisateurOne.username}}</h5>
         <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Mail : {{utilisateurOne.email}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Ville : {{utilisateurOne.idVille!.nom}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Adresse : {{utilisateurOne.adresse}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Tel : {{utilisateurOne.tel}}</li>
         </ul>
          <p>
            <a (click)="onOpenModal(utilisateurOne, 'edit')" class="btn btn-primary tooltips" data-placement="top" data-original-title="Edit"><i class="fa fa-pencil"></i> </a>
                <a (click)="onOpenModal(utilisateurOne, 'delete')" class="btn btn-danger tooltips" data-placement="top" data-original-title="Delete"><i class="fa fa-times"></i></a>
          </p>
        </div>
      </div>
    </section>


<!-- Section reservations -->
<h2 class="pb-2 border-bottom">Vos reservations</h2>
<a  routerLink="/anonce" class="btn btn-primary tooltips" data-placement="top" data-original-title="Edit"><i class="fa fa-search"></i> </a>
<div class="row">
   <div *ngFor="let reservation of utilisateurOne?.reservations" class="col-md-6 col-xl-3">
      <div class="card m-b-30">
         <div class="card-body row">
            <div class="col-6">
               <a href=""><img src="anonce?.imageUrl" alt="" class="img-fluid rounded-circle w-60"></a>
            </div>
            <div class="col-6 card-title align-self-center mb-0">
               <h5>{{reservation?.idAnonce?.idUser?.username}}</h5>
            </div>
         </div>
         <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Date : {{reservation?.idAnonce?.date}}</li>
            <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Heure debute : {{reservation?.idAnonce?.hDebut}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Ville Depart : {{reservation?.idAnonce?.idVilleDepart?.nom}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Ville Arrive : {{reservation?.idAnonce?.idVilleArrive?.nom}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Vehicule : {{reservation?.idAnonce?.idVehicule?.name}}</li>
            
         </ul>
         <div class="card-body">
          <div class="float-right btn-group btn-group-sm">
             <a (click)="onOpenReservationModal(reservation, 'delete')" class="btn btn-secondary tooltips" data-placement="top" data-original-title="Delete"><i class="fa fa-times"></i></a>
          </div>
         </div>
      </div>
   </div>
 </div>
<!-- Delete reservation Modal -->
<div class="modal fade" id="deleteReservationModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="deleteModelLabel">Delete Reservation</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <p>Est ce que vous voulez supprimer le reservation</p>
            <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
               <button (click)="onDeleteReservation(deleteReservation!.id)" class="btn btn-danger" data-dismiss="modal">Oui</button>
            </div>
         </div>
      </div>
   </div>
 </div> 


<!-- Section anonces -->
<h2 class="pb-2 border-bottom">Vos anonces</h2>
<a (click)="onOpenAddAnonceModal()" class="btn btn-primary tooltips" data-placement="top" data-original-title="Edit"><i class="fa fa-plus"></i> </a>
<div class="row">
   <div *ngFor="let anonce of utilisateurOne?.anonces" class="col-md-6 col-xl-3">
      <div class="card m-b-30">
         <div class="card-body row">
            <div class="col-6">
               <a href=""><img src="anonce?.imageUrl" alt="" class="img-fluid rounded-circle w-60"></a>
            </div>
            <div class="col-6 card-title align-self-center mb-0">
               <h5>{{anonce?.idUser?.username}}</h5>
            </div>
         </div>
         <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Nombre place : {{anonce?.nbPlace}}</li>
            <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Date : {{anonce?.date}}</li>
            <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Heure debute : {{anonce?.hDebut}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Ville Depart : {{anonce?.idVilleDepart?.nom}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Ville Arrive : {{anonce?.idVilleArrive?.nom}}</li>
            <li class="list-group-item"><i class="fa fa-boite float-right"></i>Vehicule : {{anonce?.idVehicule?.name}}</li>
            
         </ul>
         <div class="card-body">
          <div class="float-right btn-group btn-group-sm">
             <a (click)="onOpenAnonceModal(anonce, 'edit')" class="btn btn-primary tooltips" data-placement="top" data-original-title="Edit"><i class="fa fa-pencil"></i> </a>
             <a (click)="onOpenAnonceModal(anonce, 'delete')" class="btn btn-secondary tooltips" data-placement="top" data-original-title="Delete"><i class="fa fa-times"></i></a>
          </div>
         </div>
      </div>
   </div>
 </div>


<!-- Add Anonce Modal -->
<div class="modal fade" id="addAnonceModal" tabindex="-1" role="dialog" aria-labelledby="addAnonceModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
     <div class="modal-content">
        <div class="modal-header">
           <h5 class="modal-title" id="addAnonceModalLabel">Add Anonce</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
           </button>
        </div>
        <div class="modal-body">
           <form #addForm="ngForm" (ngSubmit)="onAddAnonce(addForm)">

           <div class="form-group">
              <select [ngModel]="editAnonce?.idUser" name="idUser" class="form-control" id="idUser" required>
                <option  [ngValue]="utilisateurOne">
                   {{utilisateurOne.username}}
                </option>
              </select>
             </div>
            

             <div class="form-group">
               <label for="idVehicule">Vehicule</label>
               <select [ngModel]="editAnonce?.idVehicule" name="idVehicule" class="form-control" id="idVehicule" required>
                  <option *ngFor="let vehicule of utilisateurOne?.vehicules" [ngValue]="vehicule">
                    {{vehicule?.name}}
                 </option>
               </select>
              </div>



             <div class="form-group">
              <label for="nbPlace">nombre place</label>
              <input type="text" ngModel name="nbPlace" class="form-control" id="nbPlace" placeholder="Nombre Place" required>
           </div>

             <div class="form-group">
              <label for="date">Date</label>
              <input type="date" ngModel name="date" class="form-control" id="date" placeholder="Date" required>
           </div>

           <div class="form-group">
              <label for="hDebut">Heure debute</label>
              <input type="time" ngModel name="hDebut" class="form-control" id="hDebut" placeholder="Heure debut" required>
           </div>



           


         <div class="form-group">
            <label for="idVilleDepart">Ville depart</label>
            <select [ngModel]="editUtilisateur?.idVille" name="idVilleDepart" class="form-control" id="idVilleDepart" required>
               <option *ngFor="let ville of villes" [ngValue]="ville">
                 {{ville?.nom}}
              </option>
            </select>
           </div>

           <div class="form-group">
            <label for="idVilleArrive">Ville arrive</label>
            <select [ngModel]="editUtilisateur?.idVille" name="idVilleArrive" class="form-control" id="idVilleArrive" required>
               <option *ngFor="let ville of villes" [ngValue]="ville">
                 {{ville?.nom}}
              </option>
            </select>
           </div>


           <div class="modal-footer">
              <button type="button" id="add-anonce-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary" >Save changes</button>
           </div>
           </form>
        </div>
     </div>
   </div>
   </div>
 
 <!-- Edit anonce Modal -->
 <div class="modal fade" id="updateAnonceModal" tabindex="-1" role="dialog" aria-labelledby="anonceEditModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="updateAnonceModalLabel">Edit Anonce editAnonce.name</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form #editForm="ngForm">

               <div class="form-group">
                  <label for="idVehicule">Vehicule</label>
                  <select [ngModel]="editAnonce?.idVehicule" name="idVehicule" class="form-control" id="idVehicule" required>
                     <option *ngFor="let vehicule of utilisateurOne?.vehicules" [ngValue]="vehicule">
                       {{vehicule?.name}}
                    </option>
                  </select>
                 </div>





               <div class="form-group">
                  <label for="nbPlace">Nombre place</label>
                  <input type="text" ngModel="{{editAnonce?.nbPlace}}" name="nbPlace" class="form-control" id="nbPlace" aria-describedby="typeHelp" placeholder="nombre place">
               </div>
               <input type="hidden" ngModel="{{editAnonce?.id}}" name="id" class="form-control" id="id" placeholder="id">
           

               <div class="form-group">
                <label for="date">Date</label>
                <input type="date" ngModel name="date" class="form-control" id="date" placeholder="Date" required>
             </div>
  
             <div class="form-group">
                <label for="hDebut">Heure debute</label>
                <input type="time" ngModel name="hDebut" class="form-control" id="hDebut" placeholder="Heure debut" required>
             </div>
  
  
  
             
  
  
           <div class="form-group">
              <label for="idVilleDepart">Ville depart</label>
              <select [ngModel]="editUtilisateur?.idVille" name="idVilleDepart" class="form-control" id="idVilleDepart" required>
                 <option *ngFor="let ville of villes" [ngValue]="ville">
                   {{ville?.nom}}
                </option>
              </select>
             </div>
  
             <div class="form-group">
              <label for="idVilleArrive">Ville arrive</label>
              <select [ngModel]="editUtilisateur?.idVille" name="idVilleArrive" class="form-control" id="idVilleArrive" required>
                 <option *ngFor="let ville of villes" [ngValue]="ville">
                   {{ville?.nom}}
                </option>
              </select>
             </div>




               <div class="form-group">
               <select [ngModel]="editAnonce?.idUser" name="idUser" class="form-control" id="idUser" placeholder="idUser">
                 <option [ngValue]="utilisateurOne">
                    {{utilisateurOne.username}}
                 </option>
               </select>
              </div>

              
               <div class="modal-footer">
                  <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Close</button>
                  <button (click)="onUpdateAnonce(editForm.value)" data-dismiss="modal" class="btn btn-primary" >Save changes</button>
               </div>
            </form>
         </div>
      </div>
   </div>
 </div>
 
 <!-- Delete anonce Modal -->
 <div class="modal fade" id="deleteAnonceModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="deleteModelLabel">Delete Anonce</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <p>Are you sure you want to delete anonce</p>
            <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
               <button (click)="onDeleteAnonce(deleteAnonce!.id)" class="btn btn-danger" data-dismiss="modal">Oui</button>
            </div>
         </div>
      </div>
   </div>
 </div> 






<!-- Vehicules -->

    <h2 class="pb-2 border-bottom">Vehicules</h2>
    <a (click)="onOpenAddVehiculeModal()" class="btn btn-primary tooltips" data-placement="top" data-original-title="Edit"><i class="fa fa-plus"></i> </a>
    <div class="row">
      <div *ngFor="let vehicule of utilisateurOne?.vehicules" class="col-md-6 col-xl-3">
         <div class="card m-b-30">
            <div class="card-body row">
               <div class="col-6">
                  <a href=""><img src="vehicule?.imageUrl" alt="" class="img-fluid rounded-circle w-60"></a>
               </div>
               <div class="col-6 card-title align-self-center mb-0">
                  <h5>{{vehicule?.name}}</h5>
                  <p class="m-0">{{vehicule?.idTypeV?.nom}}</p>
               </div>
            </div>
            <ul class="list-group list-group-flush">
               <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Nombre place : {{vehicule?.nbPlace}}</li>
               <li class="list-group-item"><i class="fa fa-boite float-right"></i>Type boite : {{vehicule?.idBoite?.nom}}</li>
               <li class="list-group-item"><i class="fa fa-boite float-right"></i>Immatriculation : {{vehicule?.immatriculation}}</li>
               <li class="list-group-item"><i class="fa fa-boite float-right"></i>Utilisateur : {{vehicule?.idUser?.username}}</li>
            </ul>
            <div class="card-body">
             <div class="float-right btn-group btn-group-sm">
                <a (click)="onOpenVehiculeModal(vehicule, 'edit')" class="btn btn-primary tooltips" data-placement="top" data-original-title="Edit"><i class="fa fa-pencil"></i> </a>
                <a (click)="onOpenVehiculeModal(vehicule, 'delete')" class="btn btn-secondary tooltips" data-placement="top" data-original-title="Delete"><i class="fa fa-times"></i></a>
             </div>
            </div>
         </div>
      </div>
    </div>
    
 <!-- Add Vehicule Modal -->
<div class="modal fade" id="addVehiculeModal" tabindex="-1" role="dialog" aria-labelledby="addVehiculeModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
     <div class="modal-content">
        <div class="modal-header">
           <h5 class="modal-title" id="addVehiculeModalLabel">Add Vehicule</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
           </button>
        </div>
        <div class="modal-body">
           <form #addForm="ngForm" (ngSubmit)="onAddVehicule(addForm)">
           <div class="form-group">
              <label for="name">Nom</label>
              <input type="text" ngModel name="name" class="form-control" id="name" placeholder="Name" required>
           </div>

           
           <div class="form-group">
              <label for="nbPlace">nombre place</label>
              <input type="text" ngModel name="nbPlace" class="form-control" id="nbPlace" placeholder="Nombre Place" required>
           </div>

           <div class="form-group">
              <label for="imageUrl">Image URL</label>
              <input type="text" ngModel name="imageUrl" class="form-control" id="imageUrl" placeholder="Image URL" required>
           </div>
           <div class="form-group">
              <label for="immatriculation">Immatriculation</label>
              <input type="text" ngModel name="immatriculation" class="form-control" id="immatriculation" placeholder="Immatriculation" required>
           </div>

           <div class="form-group">
            <select [ngModel]="editVehicule?.idUser" name="idUtilisateur" class="form-control" id="idUtilisateur" required>
              <option  [ngValue]="utilisateurOne">
                 {{utilisateurOne.username}}
              </option>
            </select>
           </div>


           <div class="form-group">
             <label for="idTypeV">Type vehicule</label>
               <select [ngModel]="editVehicule?.idTypeV" name="idTypeV" class="form-control" id="idTypeV" required>
                 <option *ngFor="let typeV of typeVs" [ngValue]="typeV">
                    {{typeV?.nom}}
                 </option>
               </select>
              </div>

              <div class="form-group">
                <label for="idBoite">Type de boite</label>
                  <select [ngModel]="editVehicule?.idBoite" name="idBoite" class="form-control" id="idBoite" required>
                    <option *ngFor="let boite of boites" [ngValue]="boite">
                       {{boite?.nom}}
                    </option>
                  </select>
                 </div>


           <div class="modal-footer">
              <button type="button" id="add-vehicule-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary" >Save changes</button>
           </div>
           </form>
        </div>
     </div>
   </div>
   </div>
 


 

<!-- Edit vehicule Modal -->
<div class="modal fade" id="updateVehiculeModal" tabindex="-1" role="dialog" aria-labelledby="vehiculeEditModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="updateVehiculeModalLabel">Edit Vehicule editVehicule.name</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form #editForm="ngForm">
               <div class="form-group">
                  <label for="name">Name</label>
                  <input type="text" ngModel="{{editVehicule?.name}}" name="name" class="form-control" id="name" aria-describedby="typeHelp" placeholder="Name">
               </div>
               <input type="hidden" ngModel="{{editVehicule?.id}}" name="id" class="form-control" id="id" placeholder="id">
           
               <div class="form-group">
               <select [ngModel]="editVehicule?.idTypeV" name="idTypeV" class="form-control" id="idTypeV" placeholder="type Vehicule">
                 <option *ngFor="let typeV of typeVs" [ngValue]="typeV">
                    {{typeV?.nom}}
                 </option>
               </select>
              </div>

               <div class="form-group">
                  <label for="nbPlace">Nombre place</label>
                  <input type="text" ngModel="{{editVehicule?.nbPlace}}" name="nbPlace" class="form-control" id="nbPlace" placeholder="Nombre place">
               </div>
               <div class="form-group">
                 <select [ngModel]="editVehicule?.idBoite" name="idBoite" class="form-control" id="idBoite">
                    <option *ngFor="let boite of boites" [ngValue]="boite">
                      {{boite?.nom}}
                   </option>
                 </select>
                </div>
                <div class="form-group">
                  <select [ngModel]="editVehicule?.idUser" name="idUtilisateur" class="form-control" id="idUtilisateur" required>
                    <option  [ngValue]="utilisateurOne">
                       {{utilisateurOne.username}}
                    </option>
                  </select>
                 </div>

               <div class="form-group">
                  <label for="imageUrl">Image URL</label>
                  <input type="text" ngModel="{{editVehicule?.imageUrl}}" name="imageUrl" class="form-control" id="imageUrl" placeholder="Image URL" required>
               </div>

               <div class="form-group">
                 <label for="immatriculation">Immatriculation</label>
                 <input type="text" ngModel="{{editVehicule?.immatriculation}}" name="immatriculation" class="form-control" id="immatriculation" placeholder="immatriculation">
              </div>
               <div class="modal-footer">
                  <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Close</button>
                  <button (click)="onUpdateVehicule(editForm.value)" data-dismiss="modal" class="btn btn-primary" >Save changes</button>
               </div>
            </form>
         </div>
      </div>
   </div>
 </div>
 
 <!-- Delete vehicule Modal -->
 <div class="modal fade" id="deleteVehiculeModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="deleteModelLabel">Delete Vehicule</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <p>Are you sure you want to delete vehicule {{deleteVehicule?.name}}</p>
            <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
               <button (click)="onDeleteVehicule(deleteVehicule!.id)" class="btn btn-danger" data-dismiss="modal">Oui</button>
            </div>
         </div>
      </div>
   </div>
 </div> 






<!-- Edit Modal -->
<div class="modal fade" id="updateUtilisateurModal" tabindex="-1" role="dialog" aria-labelledby="utilisateurEditModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
     <div class="modal-content">
        <div class="modal-header">
           <h5 class="modal-title" id="updateUtilisateurModalLabel">Edit Utilisateur</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
           </button>
        </div>
        <div class="modal-body">
           <form #editForm="ngForm">
              
            <div class="form-group">
              <label for="username">Username</label>
              <input type="text" ngModel="{{editUtilisateur?.username}}" name="username" class="form-control" id="username" aria-describedby="typeHelp" placeholder="username">
           </div>
           <input type="hidden" ngModel="{{editUtilisateur?.id}}" name="id" class="form-control" id="id" placeholder="id">

           <div class="form-group">
            <label for="email">Mail</label>
            <input type="text" ngModel="{{editUtilisateur?.email}}" name="email" class="form-control" id="email" placeholder="email">
         </div>




<div class="form-group">
           <label for="adresse">Adresse</label>
           <input type="text" ngModel="{{editUtilisateur?.adresse}}" name="adresse" class="form-control" id="adresse" placeholder="Adresse" required>
        </div>


        <div class="form-group">
          <label for="idVille">Ville</label>
          <select [ngModel]="editUtilisateur?.idVille" name="idVille" class="form-control" id="idVille">
             <option *ngFor="let ville of villes" [ngValue]="ville">
               {{ville!.nom}}
            </option>
          </select>
         </div>

         <div class="form-group">
          <label for="imageUrl">Image URL</label>
          <input type="text" ngModel="{{editUtilisateur?.imageUrl}}" name="imageUrl" class="form-control" id="imageUrl" placeholder="Image URL" required>
       </div>
             
       <div class="form-group">
        <label for="tel">Tel</label>
        <input type="text" ngModel="{{editUtilisateur?.tel}}" name="tel" class="form-control" id="tel" placeholder="tel" required>
     </div>

              




              <div class="modal-footer">
                 <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Close</button>
                 <button (click)="onUpdateUtilisateur(editForm.value)" data-dismiss="modal" class="btn btn-primary" >Save changes</button>
              </div>
           </form>
        </div>
     </div>
  </div>
</div>

</div>
 











 <ng-template #loggedOut>
   Please login.
 </ng-template>